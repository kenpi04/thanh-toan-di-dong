@model Nop.Web.Models.Catalog.ProductDetailsModel
@{
    Layout = "~/Views/Shared/_ColumnsOne.cshtml";
    Html.AddTitleParts(!String.IsNullOrEmpty(Model.MetaTitle) ? Model.MetaTitle : Model.Name);
    Html.AddMetaDescriptionParts(Model.MetaDescription);
    Html.AddMetaKeywordParts(Model.MetaKeywords);
    Html.AppendScriptParts("~/Scripts/tab.js");
    Html.AppendScriptParts("~/Scripts/jquery.simplemodal.js");
}
@Html.Action("ProductBreadcrumb", "Catalog", new { productId = Model.Id })

        <div class="mainContent">
            <div class="leftContent">
                <div class="whiteBgLeft">
                    <div class="blueTitle"><h1>@Model.Name</h1></div>
                    ID: @Model.Id
                    <div class="pinkPrice">@Model.ProductPrice.Price</div>
                    
                    <div class="share" id="share-div">
                        <script >
                            $.get("@Url.Action("ShareButton")",function(d){
                                $("#share-dive").html(d);
                            })
                        </script>
                </div><!---whiteBgLeft----->
                    </div>
                <div class="detailTable">
                    <div class="detail-info">
                           <table>
                        <tbody>
                            <tr>
                                <td class="greyBgTD">Khu vực</td>
                                <td>@(Model.DistrictName??"-")</td>
                               
                            </tr>
                            <tr>
                                <td class="greyBgTD">Hình thức</td>
                                <td>@(Model.CateName??"-")</td>
                            </tr>
                            <tr>
                                <td class="greyBgTD">Hướng</td>
                                <td>@(Model.Directors??"-")</td>
                            </tr>
                            <tr>
                                <td class="greyBgTD">Phòng ngủ</td>
                                <td>@Model.BedRooms </td>
                            </tr>
                            <tr>
                                <td class="greyBgTD">Phòng tắm</td>
                                <td>@Model.BadRooms </td>
                            </tr>

                            <tr>
                                <td class="greyBgTD">Cơ sở vật chất</td>
                                <td>
                                    @if (Model.Facilities.Count > 0)
                                    {
                                        foreach (var s in Model.Facilities)
                                        {
                                            <text>@s.Text</text><br />
                                        }
                                    }
                                    else
                                    { <text>-</text>}

                                </td>
                            </tr>
                            <tr>
                                <td class="greyBgTD">Diện tích</td>
                                <td>@(!string.IsNullOrWhiteSpace(Model.Area) ? Model.Area : "-") m2 </td>
                            </tr>
                            <tr>
                                <td class="greyBgTD">Tình trạng</td>
                                <td>@Model.Status</td>

                            </tr>
                            <tr>
                                <td class="greyBgTD">Tiện nghi</td>
                                <td>Nhà trống</td>
                                
                            </tr>
                           
                                <tr>
                                    <td class="greyBgTD">Môi trường xung quanh</td>
                            
                                    <td>
                                                 @if (Model.Environments.Count > 0)
                                     {
                                        @Model.Environments.Select(x => x.Text).Aggregate((a, b) => a + "," + b)
                                     }
                                    else
                                    {
                                     <text>-</text>
                                     }</td>
                                </tr>
                            
                        </tbody>
                    </table>
                    </div>
                    <div class="detail-picture">
                       @Html.Partial("_ProductDetailsPictures", Model)
                    </div>
                 <div class="clearfix"></div>
                </div><!----detailTable---->

                <div class="floatLeft">
                    <center>
                        <input type="button" onclick="setLocation('@Url.RouteUrl("AddProductToCompare", new { productId = Model.Id })')" class="blueBtn" value="so sánh">
                        <input type="button" class="blueBtn" onclick="sendMailFriend()" value="gửi email">
                        <input type="button" class="blueBtn" value="in ra" onclick="window.print()">
                        <input type="button" class="blueBtn" value="download pdf">
                    </center>
                </div><!---floatLeft-------------->

                <div class="whiteBgTab" id="tabs">
                    <div class="tabBtnActive" tab="#tab-detail"><a >MÔ TẢ CHI TIẾT</a></div>
                    <div class="tabBtn" tab="#tab-pictures"><a >HÌNH ẢNH CLIP</a></div>
                    <div class="tabBtn" tab="#tab-map"><a onclick="showMap()" >BẢN ĐỒ</a></div>
                </div><!---whiteBgTab-->

                <div id="tab-detail" class="whiteBgLeft" style="margin-top:-1px;">
                    @Html.Raw(Model.FullDescription)
                </div><!---whiteBgLeft-->
                <div id="tab-pictures" class="whiteBgLeft" style="margin-top:-1px;">
                    <ul>
                        @foreach (var o in Model.PictureModels)
                        { 
                        <li><img src="@o.FullSizeImageUrl" title="@o.Title" alt="@o.AlternateText" /></li>
                        }
                    </ul>
                </div>
                <div id="tab-map" class="whiteBgLeft" style="margin-top:-1px;">
                  <div style="width:663px;height:400px">
                          @Html.Partial("_Map",Model)
                    </div>
                </div>
                   
                    
                <script type="text/javascript">
                    var SHOW_MAP=false;
                    function showMap()
                    {
                        if(!SHOW_MAP)
                        {
                            loadScript();
                            SHOW_MAP=true;
                        }
                    }
                    $(function () {
                        $.tabs("#tabs div");

                    })
                    function sendMailFriend()
                    {
                       
                        $.get("@Url.Action("ProductEmailAFriend","Catalog")", function (d) {
                            $("#popup").html(d);
                            $("#popup").modal({
                                onClose: function () {
                                    $("#popup").hide();
                                    $.modal.close();
                                }
                                
                            });
                            $.validator.unobtrusive.parse("#form0")
                        })

                    }
                </script>
                <div class="floatLeft">
                   @Html.Action("ProductReviews", "Catalog", new {productId=Model.Id })
                </div>
                  

            </div><!-----leftContent-------------->

            <div class="rightContent">
                <div class="pinkBgRight">
                    <b>BẠN CẦN THÊM THÔNG TIN?</b>
                    <div class="twoColRight">
                        <div class="twoColRightPic"><a href="#"><img src="../Themes/Zhouse/Content/images/i1.png" class="circleImg"></a></div>
                        <div class="twoColRightText">
                            @Model.ContactName<br>
                            <b>@Model.ContactPhone</b>
                        </div>
                    </div><!---twoColRight---->
                </div><!--pinkBgRight----->

            @Html.Action("RelatedProductCustomer", new {customerId=Model.CustomerId })

                <div class="ad"><a href="#"><img src="../Themes/Zhouse/Content/images/ad.png" class="adBorder"></a></div>
                <div class="ad"><a href="#"><img src="../Themes/Zhouse/Content/images/ad.png" class="adBorder"></a></div>

            </div><!----rightContent---------------->


            <div class="floatLeft">
                @Html.Action("RecentlyViewedProductsBlock", "Catalog", new {productThumbPictureSize=200 })

            </div><!---floatLeft--->

        </div>
       
    

 @* <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true&libraries=places"></script>
    <script type="text/javascript">
        var map;
        var gmarkers = [];
        var map = null;
        var map2 = null;
        var lat = @Model..LatTiTudeGoogleMap;
        var lng = @Model.Address.LongTiTudeGoogleMap;
    
        function initialize( str,zoom) {
            if(zoom == 0 || zoom == null)
                zoom = 15;
            var mapOptions = {
                zoom:zoom,
                center: new google.maps.LatLng(lat,lng )
            };
        
            var image = {
                url: '../Themes/DefaultClean/Content/images/20.png',
                origin: new google.maps.Point(0, 0),                  
                anchor: new google.maps.Point(0, 32)
            };

            map = new google.maps.Map(document.getElementById(str),
                mapOptions);
        

            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(lat,lng ),
                map: map ,
                icon : image        
            });    
               
        
        
            google.maps.event.addListener(marker, 'click', function () {
                //  infowindow.setContent(@Model.Name.ToString());
                infowindow.open(map, marker);
            });
            // save the info we need to use later for the side_bar
            gmarkers.push(marker);

        }
        function myclick(i) {
            map.center = new google.maps.LatLng(gmarkers[i]),
            google.maps.event.trigger(gmarkers[i], "click");
        }

        var infowindow = new google.maps.InfoWindow(
       {
           size: new google.maps.Size(150, 50)
       });

        if(lat != "" && lng != "")
            google.maps.event.addDomListener(window, 'load', initialize("sidebar-map",15));
       
  

        $('#showbigmap').click(function ()
        {
            setTimeout(function () {  google.maps.event.addDomListener(window, 'load', initialize("map",18)); }, 1000);
       
        })
    

    </script>*@

     
    

