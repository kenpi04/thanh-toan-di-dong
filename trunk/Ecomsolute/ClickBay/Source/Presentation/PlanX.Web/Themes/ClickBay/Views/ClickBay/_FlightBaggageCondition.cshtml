@model BookingModel
<article>
    <h2>Thông Tin Hành Lý</h2>
    <div class="div-table info-baggage">
        <div class="div-table-row">
            <div class="div-table-cell"><span>Hành lý chiều đi</span></div><div class="div-table-cell"></div>
        </div>
        @if (Model.TicketInfo.ArilinesBaggageConditions.Count > 0)
        {
            foreach (var i in Model.TicketInfo.ArilinesBaggageConditions.Where(x=>x.IsFree).ToList())
            {
                <div class="div-table-row">
                    <div class="div-table-cell"><span class="normal">@(i.IsHandLuggage ? "Hành lý xách tay" : "Hành lý ký gửi")</span></div><div class="div-table-cell">@i.Description</div>
                </div>
            }
            if (Model.TicketInfo.ArilinesBaggageConditions.Any(x => !x.IsHandLuggage && !x.IsFree))
            {
                <div class="div-table-row">
                    <div class="div-table-cell"><span class="normal">Hành lý ký gửi</span></div>
                    <div class="div-table-cell">
                        <select id="select-id-ticketinfo" name="select-id-ticketinfo">
                            @foreach (var f in Model.TicketInfo.ArilinesBaggageConditions.Where(x => !x.IsHandLuggage && !x.IsFree).OrderBy(x => x.DisplayOrder).ToList())
                            {
                                <option value="@f.Id" data-price="@f.BaggageFee.ToString("0.#")">@string.Format(f.Description, f.Baggage, f.BaggageFee.ToString("0.#"))</option>}
                        </select>
                    </div>
                </div>
                
            }
        }
        else
        {
            <div><p>@T("booking.baggage.infonotfound")</p></div>
        }
        
        @if (Model.TicketInfoReturn != null)
        {
            <div class="div-table-row">
                <div class="div-table-cell"><span>Hành lý chiều về</span></div><div class="div-table-cell"></div>
            </div>
            if (Model.TicketInfoReturn.ArilinesBaggageConditions.Count > 0)
            {
                foreach (var i in Model.TicketInfoReturn.ArilinesBaggageConditions)
                {
                    <div class="div-table-row">
                        <div class="div-table-cell"><span class="normal">@i.Description</span></div><div class="div-table-cell">@i.Description</div>
                    </div>
                }
            }
            else
            { <div><p>@T("booking.baggage.infonotfound")</p></div>}
        }
        
    </div>
</article>
<script>
    $("select[name=select-id-ticketinfo]").change(function (e) {
        var select = $("#select-id-ticketinfo option:selected").attr("data-price");
        var bagaageOld = $("#sumprice-totalbaggagefee").attr("data-price");
        $("#sumprice-totalbaggagefee").attr("data-price", select + ' ' + $("#currencyCode").val());
        var total = $("#sumprice-totalfinaly");
        var totalPrice = total.attr("data-price");
        totalPrice = totalPrice - bagaageOld + select;
        total.attr("data-price", total);
        total.contents().remove();
        total.append(parseInt(totalPrice) + ' ' +$("#currencyCode").val());
    });
</script>